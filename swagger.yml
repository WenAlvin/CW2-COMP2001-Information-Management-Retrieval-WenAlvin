openapi: 3.0.0
info:
  title: "TrailService API"
  version: "1.0"
  description: "CRUD for Trails"
servers:
  - url: "/api"
components:
  schemas:
    Trail:
      type: "object"
      required:
        - Name
      properties:
        Name:
          type: "string"
        Description:
          type: "string"
        Difficulty:
          type: "string"
        Length:
          type: "number"
        EstimatedTime:
          type: "number"
        Features:
          type: "string"
        OwnerID:
          type: "integer"
    Location:
      type: "object"
      required:
        - TrailID
        - Latitude
        - Longitude
        - SequenceOrder
      properties:
        TrailID:
          type: "integer"
        Latitude:
          type: "number"
        Longitude:
          type: "number"
        SequenceOrder:
          type: "integer"
  parameters:
    TrailName:
      name: "name"
      in: "path"
      required: true
      schema:
        type: "string"
    LocationID:
      name: "location_id"
      in: "path"
      required: true
      schema:
        type: "integer"
paths:
  /auth/login:
    post:
      summary: Authenticate user and get token
      operationId: trails.login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email: {type: string, format: email}
                password: {type: string, minLength: 6}
      responses:
        '200':
          description: Authentication successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token: {type: string}  # Local JWT token
        '400': {description: Invalid credentials}
        '401': {description: Authentication failed}
  /trails:
    get:
      tags:
      - "trails"
      summary: "Get all trails "
      operationId: "trails.read_all"
      responses:
        "200":
          description: "List of trails"
    post:
      tags:
      - "trails"
      summary: "Create a new trail"
      operationId: "trails.create"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Trail"
      responses:
        "201":
          description: "Trail created successfully"
        "400":
          description: "Invalid input"
  /trails/{name}:
    get: 
      tags:
      - "trails"
      summary: "Get trail by name"
      operationId: "trails.read_one"
      parameters:
        - $ref: "#/components/parameters/TrailName"
      responses:
        "200":
          description: "Trail details"
        "404":
          description: "Trail not found"

    put:
      tags:
        - "trails"
      summary: "Update an existing trail"
      operationId: "trails.update"
      parameters:
        - $ref: "#/components/parameters/TrailName"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Trail"
      responses:
        "200":
          description: "Trail updated successfully"
        "400":
          description: "Invalid input"
        "404":
          description: "Trail not found"
    delete:
      tags:
        - "trails"
      summary: "Delete a trail by name"
      operationId: "trails.delete"
      parameters:
        - $ref: "#/components/parameters/TrailName"
      responses:
        "204":
          description: "Trail deleted successfully"
        "404":
          description: "Trail not found"

  /locations:
    post:
      tags:
        - "locations"
      summary: "Create a new location for a trail"
      operationId: "locations.create"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Location"
   
      responses:
        "201":
          description: "Location created successfully"
        "400":
          description: "Invalid input"
        "404":
          description: "Trail not found"

  /locations/{location_id}:
    get:
      tags:
        - "locations"
      summary: "Get location by ID"
      operationId: "locations.read_one"
      parameters:
        - $ref: "#/components/parameters/LocationID"
      responses:
        "200":
          description: "Location details"
        "404":
          description: "Location not found"
  
    put:
      tags:
        - "locations"
      summary: "Update an existing location"
      operationId: "locations.update"
      parameters:
        - $ref: "#/components/parameters/LocationID"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Location"
      responses:
        "200":
          description: "Location updated successfully"
        "400":
          description: "Invalid input"
        "404":
          description: "Location not found"
    delete:
      tags:
        - "locations"
      summary: "Delete a location by ID"
      operationId: "locations.delete"
      parameters:
        - $ref: "#/components/parameters/LocationID"
      responses:
        "204":
          description: "Location deleted successfully"
        "404":
          description: "Location not found"